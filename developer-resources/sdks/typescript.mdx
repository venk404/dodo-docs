---
title: 'TypeScript SDK'
description: 'Integrate Dodo Payments into your TypeScript and Node.js applications with type safety and modern async/await support'
icon: "js"
---

The TypeScript SDK provides convenient server-side access to the Dodo Payments REST API for TypeScript and JavaScript applications. It features comprehensive type definitions, error handling, retries, timeouts, and auto-pagination for seamless payment processing.

## Installation

Install the SDK using your package manager of choice:
<CodeGroup>
```bash npm
npm install dodopayments
```

```bash yarn
yarn add dodopayments
```

```bash pnpm
pnpm add dodopayments
```
</CodeGroup>

## Quick Start

Initialize the client with your API key and start processing payments:

```javascript
import DodoPayments from 'dodopayments';

const client = new DodoPayments({
  bearerToken: process.env['DODO_PAYMENTS_API_KEY'], // This is the default and can be omitted
  environment: 'test_mode', // defaults to 'live_mode'
});

const checkoutSessionResponse = await client.checkoutSessions.create({
  product_cart: [{ product_id: 'product_id', quantity: 1 }],
});

console.log(checkoutSessionResponse.session_id);
```

<Warning>
Always store your API keys securely using environment variables. Never commit them to version control or expose them in client-side code.
</Warning>

## Core Features

<CardGroup cols={2}>
<Card title="TypeScript First" icon="shield-check">
  Full TypeScript support with comprehensive type definitions for all API endpoints
</Card>

<Card title="Auto-Pagination" icon="arrows-rotate">
  Automatic pagination for list responses makes working with large datasets effortless
</Card>

<Card title="Error Handling" icon="triangle-exclamation">
  Built-in error types with detailed messages for different failure scenarios
</Card>

<Card title="Smart Retries" icon="repeat">
  Configurable automatic retries with exponential backoff for transient errors
</Card>
</CardGroup>

## Configuration

### Environment Variables

Set environment variables for secure configuration:

```bash .env
DODO_PAYMENTS_API_KEY=your_api_key_here
```

### Timeout Configuration

Configure request timeouts globally or per-request:

```typescript
// Configure default timeout for all requests (default is 1 minute)
const client = new DodoPayments({
  timeout: 20 * 1000, // 20 seconds
});

// Override per-request
await client.checkoutSessions.create(
  { product_cart: [{ product_id: 'product_id', quantity: 0 }] },
  { timeout: 5 * 1000 }
);
```

### Retry Configuration

Configure automatic retry behavior:

```javascript
// Configure default for all requests (default is 2 retries)
const client = new DodoPayments({
  maxRetries: 0, // disable retries
});

// Override per-request
await client.checkoutSessions.create(
  { product_cart: [{ product_id: 'product_id', quantity: 0 }] },
  { maxRetries: 5 }
);
```

<Tip>
The SDK automatically retries requests that fail due to network errors or server issues (5xx responses) with exponential backoff.
</Tip>

## Common Operations

### Create a Checkout Session

Generate a checkout session for collecting payment information:

```typescript
const session = await client.checkoutSessions.create({
  product_cart: [
    {
      product_id: 'prod_123',
      quantity: 1
    }
  ],
  return_url: 'https://yourdomain.com/return'
});

console.log('Redirect to:', session.url);
```

### Manage Customers

Create and retrieve customer information:

```typescript
// Create a customer
const customer = await client.customers.create({
  email: 'customer@example.com',
  name: 'John Doe',
  metadata: {
    user_id: '12345'
  }
});

// Retrieve customer
const retrieved = await client.customers.retrieve('cus_123');
console.log(`Customer: ${retrieved.name} (${retrieved.email})`);
```

### Handle Subscriptions

Create and manage recurring subscriptions:

```typescript
// Create a subscription
const subscription = await client.subscriptions.create({
  customer_id: 'cus_123',
  product_id: 'prod_456',
  price_id: 'price_789'
});

// Retrieve subscription usage history
const usageHistory = await client.subscriptions.retrieveUsageHistory('sub_123', {
  start_date: '2024-01-01T00:00:00Z',
  end_date: '2024-03-31T23:59:59Z'
});
```

## Usage-Based Billing

### Ingest Usage Events

Track custom events for usage-based billing:

```typescript
await client.usageEvents.ingest({
  events: [
    {
      event_id: 'api_call_12345',
      customer_id: 'cus_abc123',
      event_name: 'api_request',
      timestamp: '2024-01-15T10:30:00Z',
      metadata: {
        endpoint: '/api/v1/users',
        method: 'GET',
        tokens_used: '150'
      }
    }
  ]
});
```

<Info>
Events must have unique `event_id` values for idempotency. Duplicate IDs within the same request are rejected, and subsequent requests with existing IDs are ignored.
</Info>

### Retrieve Usage Events

Fetch detailed information about usage events:

```typescript
// Get a specific event
const event = await client.usageEvents.retrieve('api_call_12345');

// List events with filtering
const events = await client.usageEvents.list({
  customer_id: 'cus_abc123',
  event_name: 'api_request',
  start: '2024-01-14T10:30:00Z',
  end: '2024-01-15T10:30:00Z'
});
```

## Proxy Configuration

Configure proxy settings for different runtimes:

### Node.js (using undici)

```typescript
import DodoPayments from 'dodopayments';
import * as undici from 'undici';

const proxyAgent = new undici.ProxyAgent('http://localhost:8888');
const client = new DodoPayments({
  fetchOptions: {
    dispatcher: proxyAgent,
  },
});
```

### Bun

```typescript
import DodoPayments from 'dodopayments';

const client = new DodoPayments({
  fetchOptions: {
    proxy: 'http://localhost:8888',
  },
});
```

### Deno

```typescript
import DodoPayments from 'npm:dodopayments';

const httpClient = Deno.createHttpClient({ proxy: { url: 'http://localhost:8888' } });
const client = new DodoPayments({
  fetchOptions: {
    client: httpClient,
  },
});
```

## Logging

Control log verbosity using environment variables or client options:

```typescript
// Via client option
const client = new DodoPayments({
  logLevel: 'debug', // Show all log messages
});
```

```bash
# Via environment variable
export DODO_PAYMENTS_LOG=debug
```

**Available log levels:**
- `'debug'` - Show debug messages, info, warnings, and errors
- `'info'` - Show info messages, warnings, and errors  
- `'warn'` - Show warnings and errors (default)
- `'error'` - Show only errors
- `'off'` - Disable all logging

<Warning>
At the debug level, all HTTP requests and responses are logged, including headers and bodies. Some authentication headers are redacted, but sensitive data in bodies may still be visible.
</Warning>

## Migration from Node.js SDK

If you're upgrading from the legacy Node.js SDK, the TypeScript SDK offers improved type safety and features:

<Card
  title="View Migration Guide"
  icon="arrow-right"
  href="https://github.com/dodopayments/dodopayments-typescript/blob/main/MIGRATION.md">
  Learn how to migrate from the Node.js SDK to the TypeScript SDK
</Card>

## Resources

<CardGroup cols={2}>
<Card title="GitHub Repository" icon="github" href="https://github.com/dodopayments/dodopayments-typescript">
  View source code and contribute
</Card>

<Card title="API Reference" icon="book" href="/api-reference/introduction">
  Complete API documentation
</Card>

<Card title="Discord Community" icon="discord" href="https://discord.gg/bYqAp4ayYh">
  Get help and connect with developers
</Card>

<Card title="Report Issues" icon="bug" href="https://github.com/dodopayments/dodopayments-typescript/issues">
  Report bugs or request features
</Card>
</CardGroup>

## Support

Need help with the TypeScript SDK?

- **Discord**: Join our [community server](https://discord.gg/bYqAp4ayYh) for real-time support
- **Email**: Contact us at support@dodopayments.com  
- **GitHub**: Open an issue on the [repository](https://github.com/dodopayments/dodopayments-typescript)

## Contributing

We welcome contributions! Check the [contributing guidelines](https://github.com/dodopayments/dodopayments-typescript/blob/main/CONTRIBUTING.md) to get started.

